sudo: false
os:
- linux
language: haskell
cache:
  directories:
  - "$HOME/.stack"
before_install:
- sudo add-apt-repository -y ppa:hvr/ghc
- sudo apt-get update
- sudo apt-get install cabal-install-3.0
- mkdir -p ~/.local/bin
- export PATH=$HOME/.local/bin:$PATH
- travis_retry curl -L https://get.haskellstack.org/stable/linux-x86_64.tar.gz | tar xz --wildcards --strip-components=1 -C ~/.local/bin '*/stack'
install:
- stack build
- stack haddock
script:
- stack --no-terminal --skip-ghc-check test
- curl -sSL https://raw.github.com/ndmitchell/hlint/master/misc/run.sh | sh -s .
deploy:
- provider: pages
  local_dir: "$(stack path --local-doc-root)"
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  keep_history: true
  on:
    tag: true
- provider: script
  script: bash deploy.sh "$HACKAGE_USER" "$HACKAGE_PASSWORD"
  on:
    branch: master
env:
  global:
    secure: "kdNC6pcsq4Da2L22beitOKLC0mnKx+2GoNsRaz1CiyW+7jlxq5P2s8iyeU0i1s60lY371op0j3w0GEIo8/kkBNIRIZAmZqNNdXDxSuokQhYyRLeSZzmyHvN42VOyiRSYNmeY+M9HGYIGCVJbA6vnv2cgKPilC4eKhG3t0vkk7IW8NL0I3XqA/MqqB+bgrJ65KdC2y/47mg4dPPlXn7M/8N7NNvMxfxiDZ4UiUB3bEZzZyQphyIRf/OYlkgswOA7qaE9FqevoGvkm8lipS+IniGr5pi+0YaA8Q+UPjdtrEVsMXB8fpWACvkQt14I1kPYfeN+T19h01WkCT2MreGUjZPX6MA0kbuNGlw76smH7ygXrk6dQf7W6EEEvvSnVxuJBJ465OpQKCbscX7Xqvt85n8EFsdQ4OiUQ/2MZCku4h8WxusX8TURYMqAe2ClrgKJH+u4UPcQriiYGxytk1HBz1DqD2FOMLRdRwVX7fQfuQ3MHVOZK007KuEOhSQP9mkUztREn7Ox/Oe07mYNzLK/Q0NBnde/9/mXV2Z/gPNTLmMWP8xTO32NCZqhf8Fp/TNuXLgDFj0uPDOCqGISrE3geIDM/wllLhglhKX4kJNvCpShk0OMMR8ppTAF6t0+T9ah0EuuGVnzk28NxosxkxgkqW07l5BIpqfB2woidXt4N2ac="
    secure: "CTtJwdSIeXOF7dXUBbSr3VzkMr4CJkNmZVrfVyodkdgxRNn2DQtDl87YVvifb6mIpkdjwlrmeXuAKyPQae4SVMTDGCx0FA8+mTQ9tEGIVbE1ryRCd7XZfrg7WS8UXHIaxA+O+O6ZA1I/ca24QKhrKTDmWo4fp18/Am+/KAkY4eRfH+5adlmwwf4Eh9aHThyc7GAut0cbst8+pOxM+tRmKRvmIckqP09nM7ZA8YtzWtWzVGtCRhb0aAB+FjVz7IyeFLg9Imjl0SX2CGF/mx6/oBeBZaFl7vAYx+mwPeZiHw1aXHjalaedsg8IfdgpawKNrEmp8vb2Iy2KwB/bdD0gAOn9SRdciukKWteJy4Wp5Dzp+DXJg3/+3N+vS3MgXOKp+zGfn2BGRVDbZpc2nL2olHGgOvms2ga8fZb8/6NinuLnTU2hYMpDfWhc/XiZ/niPpkv6vb3IpnNcOh6IKao6hxeVYt2NSVQaGleUlBx2vQl7tAfF6vHJQAnYvPVJta6VGtwhRff/DzTIYASiVKSYfELPjnWGB0ijbMshV4HrQjxAdj4eyk4mQSI50qeuRCSbkkT/Q/6+S4scVuGnbcoUEs6m5msq6Ouji+oValRVU1MOXN00kRcH2gmtIBolA1OwcQEETpC5lktYlYGHi6SqF+0vaTkz54KzC4UQAX1b2P8="
    secure: "FPWqWr2uWzikKiR+lRPlhkOHh+O/NEW1aNsva04uWXtRfY9pt3iRd5HroViyWSdHVzptA9KSu67DkhHMMFaGJynPvRbvt/QjArpmxTnNWmvYtzSi+QBoiFAxvvefeFy04RjohXXA1bIOIyP/8dW9aDZuc2q+FnKWmD2WH3Bsik9rXq+bgLe6qQptw0xFI8MU0xPbbJXJ8UAkI7+7psGKYippFvUu7AyMZr12Bdl3CAg/VNAzeL7s2aD0pLrj4hL/2ZEorIxiubjGQ9Z2FEXchVdbPoWfa9X9Th3IIm0Tsc4Xg//wj3A0WOx1jCr92dpo2visC8LvbUxP0F93y0XG3Bb5bp/9tdP0/WZEhX2qCFrejzS+ezEbxBKExT+5MoOobqSDv4gfKmIfeQ80G456HivVc38LrF0aCvZAxCzA5YCoOdSijENzfeIlm9ds4AbVUJkObiJRTKyN4QpyAWI9Cq7qpSRyBkTADNfHK+o36wo0dVbvqSnh3fiuXPPh3zd1og6HI8EV8Fr+U6XEgL1zpHtDv0hS0S0X7RG8qXyNIuh2hfVIr4WHsFORUofJ3/vDEFzbSbqcjvhkWosWW/lzq3PZZdjvgvxkraUSNSH7fHDjVl7yehJjcSBZMGcsOSuFZz2/myc2+QX9rjJk80wr+4OQThov+86sLeo5NCAmaFE="
