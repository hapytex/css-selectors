sudo: false
os:
- linux
language: haskell
cache:
  directories:
  - "$HOME/.stack"
before_install:
- sudo add-apt-repository -y ppa:hvr/ghc
- sudo apt-get update
- sudo apt-get install cabal-install-3.0
- mkdir -p ~/.local/bin
- export PATH=$HOME/.local/bin:$PATH
- travis_retry curl -L https://get.haskellstack.org/stable/linux-x86_64.tar.gz | tar xz --wildcards --strip-components=1 -C ~/.local/bin '*/stack'
install:
- stack build
- stack haddock
script:
- stack --no-terminal --skip-ghc-check test
- curl -sSL https://raw.github.com/ndmitchell/hlint/master/misc/run.sh | sh -s .
deploy:
- provider: script
  script: bash deploy.sh "$HACKAGE_USER" "$HACKAGE_PASSWORD"
  on:
    branch: master
- provider: pages
  local_dir: "$(stack path --local-doc-root)"
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  keep_history: true
  on:
    tag: true
env:
  global:
  - secure: IVG8U+ej8ohw+nCPO1tV2qB5OyBXIbKxDDn2sGnWe/fSaFjzxgKyzCMJDuB3ETB33GVYHyU/ZfgB5b7j0DxKnqb3cdBAvfKlvQ6kWvhh55V0/CURV2nUIPM81LsRiFEBdaZ9O9RQ77AAcextpU8K9jOUij6uPRMK6B5FDT8LncwgITH2nl8Y+iGbx/Op5fi7mm0fOEVgpBnsC+5bxOZ0pWdghp/CyIkDHHSSh5YDYMU06rFbLVjc6DScPd7IkztDvIOuu5h5mNp7AEXQpe1SomswxyjHShR8nVYbfj4AEjC009qQfsDSC3M5Bb1GDxgk5eUfxNRrXM3wMYH8uuvyWmsyoxcPa64KxI6ma0qw8VeJ4aIqA3E74K0ImoANCyUk7wNR/nAlngMkN9Q3Kaka4/3jOmDxGh6BPAyEC+8ERv9HE5y3U5sqk9geFXG/6wsYUwHkG6ayJgCuxlHhho9TrZxCTviFXe29vjUOn+59WnQIiWGoDAKivYdgqismGVTX3eCCtkfu+osqCj4wP+s2N38xW1syJizCR5/egAgLWSD8SXLqfwjccynyDbMifECoFLUtLrlsKvnfR/EjKFi7a9K/jrAN0JGKea8bt3wO88AXAcYCiLfOMhdzrREXEJ5cofoc9YHpwJlxIFgokscPAG9VFT2Z/c6n1bl20mj2FiQ=
  - secure: FjZjlCjjZBevLDZBmgALJDrSCHdxwtkzZc27vVfKqQyqfhrQKlyYxMDKmAFFlaXCxfCkUMnbLynoFd4dLCCe+4qwaDah9CeeLn59qW00EvZtKhrWs/bSJF196ejESUCv+bFl0MD8nteGO4gEnA4JcII8jg3if4FDTymEjTZwqIKR0UHdWNIb9q63OlhSAV9o8KO6tyM5/bPpfOtiSRPdjZkIuyX5rIiGESUWEJ58VvX6ZQwqovQUzOO/Sgexx50ZPpdvaTi01wqE+a0pE0dJPXzK6t3Hx9K4H7Ygg4lGiYWFF84LkBa9nIGaG/cFFPDyS8GJ1KTHqLBF5TBtzYsH68/A/7fvaC2P66/2lPEZv9AxlCtLsz7vVLgjfzM+7C8UD4rQNwjMSFc9BJE/TqeBLUngor7bgJv5aajlIBBHw9+8KLyJnfnmnZi9jZHF7tUvRCqlpVip1ugZOBvxYRp3aQ0wx0+S3ra0PJoMEF8cT7UPqWUSEPqbDhCl1UPAxXnlMBirbFefAi2eMgBHMILRzFAF3CPO/XTsmAUELtvKzzhnW3gqPga5YnTrLVF5C457kl/7cAyNdcAoxGPXGNIJuMvowG9VzslDV2wNZAYiVx+qrGlFRvyOdV/7Dl8EI1+VLHqwTFnNtEUESsomOKfbdxkHdxPQPfO5Ru5RTx6TAXQ=
  - secure: pHhHwIvu0JaKVvIgMO4qZ4iSFKMdwzYuKTWyt2au/18NyN115dt2NY7v5wisukuWUR1YrRFcaKOZ91dvpslR+HYnxY98UfYP/svLIsYzKVB8Cm7T6nO1rBS+4MFEW6AJkGy70lQJVy15STLkGHBRs0y/DURGD/PQ5kKf5P8/YKhIt9J2mIpPrQ0p2HOv/c/FLQg5kH65ZcCw2e5GlB+mUc5PycZQO1OtOuAnFkcr+2etUGWelv9QEXbzyfBShp20Vgl+rYP091BTqGdlXoqPLeAmaM2jeluhtT1i8JUZu76fk9hnEzn4uVGt41n1VuEAQmy1Od9402vyebBTdyb7EM7GCVikNRl/oo/1m+wCE0nR7MsrujT9U0R1rhFYZ3q5HQ4JsNa+b+WPqUrNKNpgUQR+oIxSO6domHuO09J7LQebDzkcm3nzVX9i60N9C0yRKgVqYthGH8RJy5uIv6aPK0hRt1cE80M891F1XX3UToacnabio6eKfTQsYs4nlEc0pir+OI6kVrM5yp1+AbdafvVawCmfZg6PvIG7c+gUY2XSd8JSKqeqxttJhkoBNtLqlVGepNqzfV/k3htSO/XB327Skj1g57V/wBkq4FG8Dp0iBlcd6nvRDWmOhicmmFSM8IzAj0jN49meFUheWYGUn7tzwKjwXGYsKbhWGvXgy1A=
